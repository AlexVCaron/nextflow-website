<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge">-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/img/favicon.png">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://www.nextflow.io/feed.xml">
    <title>Deploy Nextflow Pipelines with Google Cloud Batch! | Nextflow</title>
    <meta name="description" content="Deploy Nextflow pipelines at scale with new the Google Cloud Batch compute service.">
    <meta property="og:title" content="Deploy Nextflow Pipelines with Google Cloud Batch! | Nextflow" />
    <meta property="og:description" content="Deploy Nextflow pipelines at scale with new the Google Cloud Batch compute service." />
    <meta property="og:image" content="https://nextflow.io/img/google_cloud_batch_nextflow-min.png" />
    <meta property="og:type" content="website" />
    <meta data-react-helmet="true" name="twitter:card" content="summary_large_image" />
    <meta data-react-helmet="true" name="twitter:creator" content="@nextflowio" />
    <meta property="twitter:title" content="Deploy Nextflow Pipelines with Google Cloud Batch! | Nextflow" />
    <meta property="twitter:description" content="Deploy Nextflow pipelines at scale with new the Google Cloud Batch compute service." />
    <meta property="twitter:image" content="https://nextflow.io/img/google_cloud_batch_nextflow-min.png" />

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/css/color-styles.css" rel="stylesheet">
    <link href="/css/ui-elements.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Resources -->
    <link href="/css/animate.css" rel="stylesheet">
    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

</head>

<body class="body-green">
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">

    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/index.html" style='padding: 8px'><img src='/img/nextflow2014_no-bg.png' height='40px' style='border: 0;'></a>
        </div>
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav">
                <li class="show animated flipInX" >
                    <a href="/index.html#Features" class="">Features</a>
                </li>
                <li class="show animated flipInX" >
                    <a href="/index.html#GetStarted" class="">Quick start</a>
                </li>

                <li class="dropdown show animated flipInX">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="/example1.html">Basic pipeline</a></li>
                        <li><a href="/example2.html">Mixing scripting languages</a></li>
                        <li><a href="/example3.html">BLAST pipeline</a></li>
                        <li><a href="/example4.html">RNA-Seq pipeline</a></li>
                        <li><a href="https://github.com/CRG-CNAG/CalliNGS-NF/" target="_blank">Variant Calling pipeline</a></li>
                    </ul>
                </li>

                <li class="dropdown show animated flipInX">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="/docs/latest/index.html">Reference documentation</a></li>
                        <li><a href="/docs/edge/index.html">Edge release documentation</a></li>
                        <li><a href="http://nextflow-io.github.io/patterns/index.html">Implementation patterns</a></li>
                        <li><a href="https://github.com/nextflow-io/nextflow">GitHub repository</a></li>
                        <li><a href="https://github.com/nextflow-io/nextflow/discussions">Discussion forum</a></li>
                        <li><a href="https://www.nextflow.io/slack-invite.html">Slack community chat</a></li>
                        <li><a href="https://nf-co.re">nf-core Community pipelines</a></li>                       
                    </ul>
                </li>

                <li class="show animated flipInX">
                    <a href="/blog.html">Blog</a>
                </li>

                <li class="show animated flipInX">
                    <a href="/about-us.html">About</a>
                </li>
                   
            </ul>

        </div>
    </div>
</div>
	
    <!-- Body -->
	<div class="wrapper"> <!-- wrapper -->
	  <div class="container">
	    <div class="row">
		  <div class="col-sm-8">
			<div class="blg-summary">
			  <h2><a href="#">Deploy Nextflow Pipelines with Google Cloud Batch!</a></h2>
			  <ul class="text-muted list-inline blg-header">
				<li><i class="fa fa-user"></i> Paolo Di Tommaso</li>
				<li><i class="fa fa-calendar"></i> 13 July 2022</li>
				<!--<li><i class="fa fa-comments-o"></i> 21 comments</li> -->
			  </ul>
			  <hr>
			  <div class="blg-text">
              <p>A key feature of Nextflow is the ability to abstract the implementation of data analysis pipelines so they can be deployed in a portable manner across execution platforms. </p><p>As of today, Nextflow supports a rich variety of HPC schedulers and all major cloud providers. Our goal is to support new services as they emerge to enable Nextflow users to take advantage of the latest technology and deploy pipelines on the compute environments that best fit their requirements. </p><p>For this reason, we are delighted to announce that Nextflow now supports <a href="https://cloud.google.com/batch">Google Cloud Batch</a>, a new fully managed batch service just announced for beta availability by Google Cloud.</p><h3>A New On-Ramp to the Google Cloud</h3><p>Google Cloud Batch is a comprehensive cloud service suitable for multiple use cases, including HPC, AI/ML, and data processing. While it is similar to the Google Cloud Life Sciences API, used by many Nextflow users today, Google Cloud Batch offers a broader set of capabilities. As with Google Cloud Life Sciences, Google Cloud Batch automatically provisions resources, manages capacity, and allows batch workloads to run at scale. It offers several advantages, including:</p>
<ul>
  <li>The ability to re-use VMs across jobs steps to reduce overhead and boost performance.</li>
  <li>Granular control over task execution, compute, and storage resources.</li>
  <li>Infrastructure, application, and task-level logging.</li>
  <li>Improved task parallelization, including support for multi-node MPI jobs, with support for array jobs, and subtasks.</li>
  <li>Improved support for spot instances, which provides a significant cost saving when compared to regular instance.</li>
  <li>Streamlined data handling and provisioning.</li>
</ul><p>A nice feature of Google Cloud Batch API, that fits nicely with Nextflow, is its built-in support for data ingestion from Google Cloud Storage buckets. A batch job can <em>mount</em> a storage bucket and make it directly accessible to a container running a Nextflow task. This feature makes data ingestion and sharing resulting data sets more efficient and reliable than other solutions. </p><h3>Getting started with Google Cloud Batch</h3><p>Support for the Google Cloud Batch requires the latest release of Nextflow from the edge channel (version <code>22.07.1-edge</code> or later). If you don't already have it, you can install this release using these commands:</p>
<pre><code>export NXF_EDGE=1 
curl get.nextflow.io | bash
./nextflow -self-update
</code></pre><p>Make sure your Google account is allowed to access the Google Cloud Batch service by checking the <a href="https://console.cloud.google.com/apis/dashboard">API &amp; Service</a> dashboard. </p><p>Credentials for accessing the service are picked up by Nextflow from your environment using the usual <a href="https://github.com/googleapis/google-auth-library-java#google-auth-library-oauth2-http">Google Application Default Credentials</a> mechanism. That is, either via the <code>GOOGLE_APPLICATION_CREDENTIALS</code> environment variable, or by using the following command to set up the environment: </p>
<pre><code>gcloud auth application-default login
</code></pre><p>After authenticating yourself to Google Cloud, create a <code>nextflow.config</code> file and specify <code>google-batch</code> as the Nextflow executor. You will also need to specify the Google Cloud project where execution will occur and the Google Cloud Storage working directory for pipeline execution. </p>
<pre><code>cat &lt;&lt;EOT &gt; nextflow.config
process.executor = &#39;google-batch&#39;
workDir = &#39;gs://YOUR-GOOGLE-BUCKET/scratch&#39;
google.project = &#39;YOUR GOOGLE PROJECT ID&#39;
EOT
</code></pre><p>In the above snippet replace <code>&lt;YOUR_GOOGLE_BUCKET&gt;</code> with a Google Storage bucket of your choice where to store the pipeline output data and <code>&lt;YOUR_GOOGLE_PROJECT_ID&gt;</code> with your Google project Id where the computation will be deployed. </p><p>With this information, you are ready to start. You can verify that the integration is working by running the Nextflow “hello” pipeline as shown below:</p>
<pre><code>nextflow run https://github.com/nextflow-io/hello
</code></pre><h3>Migrating Google Cloud Life Sciences pipelines to Google Cloud Batch</h3><p>Google Cloud Life Sciences users can easily migrate their pipelines to Google Cloud Batch by making just a few edits to their pipeline configuration settings. Simply replace the <code>google-lifesciences</code> executor with <code>google-batch</code>. </p><p>For each setting having the prefix <code>google.lifeScience.</code>, there is a corresponding <code>google.batch.</code> setting. Simply update these configuration settings to reflect the new service.</p><p>The usual process directives such as: <a href="https://www.nextflow.io/docs/latest/process.html#cpus">cpus</a>, <a href="https://www.nextflow.io/docs/latest/process.html#memory">memory</a>, <a href="https://www.nextflow.io/docs/latest/process.html#time">time</a>, <a href="https://www.nextflow.io/docs/latest/process.html#machinetype">machineType</a> are natively supported by Google Cloud Batch, and should not be modified. </p><p>Find out more details in the <a href="https://www.nextflow.io/docs/edge/google.html#cloud-batch">Nextflow documentation</a>.</p><h3>100% Open, Built to Scale</h3><p>The Google Cloud Batch executor for Nextflow is offered as an open source contribution to the Nextflow project. The integration was developed by Google in collaboration with <a href="https://seqera.io/">Seqera Labs</a>. This is a validation of Google Cloud’s ongoing commitment to open source software (OSS) and a testament to the health and vibrancy of the Nextflow project. We wish to thank the entire Google Cloud Batch team, and Shamel Jacobs in particular, for their support of this effort. </p><h3>Conclusion</h3><p>Support for Google Cloud Batch further expands the wide range of computing platforms supported by Nextflow. It empowers Nextflow users to easily access cost-effective resources, and take full advantage of the rich capabilities of the Google Cloud. Above all, it enables researchers to easily scale and collaborate, improving their productivity, and resulting in better research outcomes.</p>  
			  </div>
			  
			  <p class="tags">
				<a href="/tags/nextflow.html" class="background-color bg-hover-color">nextflow</a>
				<a href="/tags/google.html" class="background-color bg-hover-color">google</a>
				<a href="/tags/cloud.html" class="background-color bg-hover-color">cloud</a>
			  </p>

			</div>
			<!-- COMMENTS -->
			<div class="comments">
			  <!--<h4>3 comments</h4>-->
			  
			    <div id="disqus_thread"></div>
                <script type="text/javascript">
                    if( window.location.hostname == 'localhost' || window.location.hostname == '127.0.0.1' ) { throw new Error('Skip Disqus on localhost') };
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'nextflow'; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
			</div>
			 
			<!-- // Comments -->
		  </div>
		  <div class="col-sm-4">
			<h3>Stay Tuned <small>Social Links</small></h3>
			<hr>
			<ul class="blg-social">
			  <li>
			    <a href="/feed.xml">
			      <span class="icon rss">
				    <i class="fa fa-rss fa-2x"></i>
				  </span>
				  <span class="text-muted">Subscribe to our RSS Feed.</span>
				</a>
			  </li>
			  <li>
			    <a href="https://twitter.com/nextflowio">
			      <span class="icon twitter">
				    <i class="fa fa-twitter fa-2x"></i>
				  </span>
				  <span class="text-muted">Subscribe to our Twitter Feed.</span>
				</a>
			  </li>
			</ul>
            <!--
			<h3>Popular Stories</h3>
			<hr>
			<div class="block-inverse">
			  <ul>
				<li><a href="#">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</a></li>
				<li><a href="#">Nullam id ipsum varius, tincidunt odio nec, placerat.</a></li>
				<li><a href="#">Sed sit amet auctor augue, nec dignissim ligula.</a></li>
				<li><a href="#">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</a></li>
				<li><a href="#">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</a></li>
			  </ul>
			</div>			
            -->
		  </div>
		</div>
	  </div>
	</div> <!-- / wrapper -->

	
<div class="footer-wrapper"> <!-- footer wrapper -->
    <hr>
    <div class="container">
        <footer>
            <ul class="list-inline pull-right">
                <li style="position: relative; top: 5px">
                    <a href="https://seqera.io" target="_blank" title="Developed by Seqera Labs" >
                        <img src="/img/seqera-logo-wide.png" alt="Seqera Labs"  width="180" height="28">
                    </a>
                </li>
            </ul>
            <ul class="list-inline pull-left">
                <li style="position: relative; top: 5px">
                    <a href="https://twitter.com/nextflowio" class="twitter-follow-button" data-show-count="false" >Follow @nextflowio</a>
                </li>

                <li>
                    <script type="text/javascript">
//<![CDATA[
<!--
var x="function f(x,y){var i,o=\"\",l=x.length;for(i=0;i<l;i++){if(i>(91+y))" +
"y*=2;y%=127;o+=String.fromCharCode(x.charCodeAt(i)^(y++));}return o;}f(\"=)" +
"3=+\\t\\016\\014C\\002M\\036N\\023\\037\\013\\031L\\004B\\000MSP_\\033\\031" +
"K\\017V\\025\\037\\025\\033\\t\\026,m?lh>qoaeo#t#mgqcQ|ppWc0u5*/4?\\\"\\025" +
"\\024\\013XPW_\\\\P\\002\\027S\\027A\\005\\022\\\\\\nOPUAU_\\020\\\\\\023@A" +
"@XP2i+~(hw|!ww{w$cby*=xi-x408(\\032(u7v[\\034\\020\\006\\020\\020\\024\\tH\\"+
"006D\\030\\031\\017\\035\\033\\002YB_\\033\\031_L\\005\\037RYUIL,^$?'\\rP$9" +
"c\\\" P\\027PlZR-\\014N\\\\^1<.b\\\"416RBL\\\"\\\\26>BbL22ZR.\\rN\\\\^3=-\\" +
"016\\\"\\\\74>BbJ32ZR.\\rN\\\\^HC,qNV57>BbK02ZR*\\rN\\\\^0?.b\\\"206RB{8?pZ" +
"R.\\017N\\\\^H&/\\017D/^$RB\\002H706RB\\007M:8n0:\\035Y,#o8,\\016\\\"\\\\v(" +
"DBb\\\"\\\\G2?.b\\\"J44>BbM12ZR.\\016N\\\\^OD^n4PT0?.b\\\"kr~\\177pG\\010|^" +
"$&xCEo\\\"h|kJ\\033r\\177='7\\025Uy*X'w\\026\\nAgba]L\\037ha(v6[\\032oAtov}" +
"\\023op` yP\\027rvU35QE7073;GEi?-w7\\nL=?o&xW\\005))-g%RBi963w\\026\\014od=" +
"fjY\\020en(v#RR\\\\ Z,#QRi\\\"tohEWy.~&x\\036\\020okrmpK\\030\\\"+\",91)"    ;
while(x=eval(x));
//-->
//]]>
</script>

                </li>

            </ul>
            <div class="clearfix"></div>
        </footer>
    </div>
</div>
<!-- / footer wrapper -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/custom.js"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-244N3GEN75"></script>
<script>
  if( window.location.hostname == 'localhost' || window.location.hostname == '127.0.0.1' ) { throw new Error('Skip GA on localhost') };
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-244N3GEN75');
</script>

</body>
</html>
