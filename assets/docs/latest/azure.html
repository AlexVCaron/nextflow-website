<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Azure Cloud &mdash; Nextflow 21.04.3 documentation</title>
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Google Cloud" href="google.html" />
    <link rel="prev" title="Amazon S3 storage" href="amazons3.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Nextflow
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div>
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Main">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getstarted.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html">Nextflow scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="channel.html">Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="operator.html">Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="executor.html">Executors</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsl2.html">DSL 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command line interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="awscloud.html">Amazon Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="amazons3.html">Amazon S3 storage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Azure Cloud</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#azure-blob-storage">Azure Blob Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#azure-batch">Azure Batch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-started">Get started</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pools-configuration">Pools configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#named-pools">Named pools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements-on-pre-existing-named-pools">Requirements on pre-existing named pools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pool-autoscaling">Pool autoscaling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-settings">Advanced settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="google.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">Conda environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="shifter.html">Shifter Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="singularity.html">Singularity containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="podman.html">Podman containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="charliecloud.html">Charliecloud containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ignite.html">Apache Ignite</a></li>
<li class="toctree-l1"><a class="reference internal" href="kubernetes.html">Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracing.html">Tracing &amp; visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sharing.html">Pipeline sharing</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Workflow introspection</a></li>
<li class="toctree-l1"><a class="reference internal" href="mail.html">Mail &amp; Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" aria-label="Top">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Nextflow</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          

<div role="navigation" aria-label="Breadcrumbs">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Azure Cloud</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="azure-cloud">
<span id="azure-page"></span><h1>Azure Cloud<a class="headerlink" href="#azure-cloud" title="Permalink to this headline">¶</a></h1>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The support for Azure Cloud requires Nextflow version <code class="docutils literal notranslate"><span class="pre">21.04.0</span></code> or later. If you don’t have it installed
use the following command to download it in your computer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="n">get</span><span class="o">.</span><span class="n">nextflow</span><span class="o">.</span><span class="n">io</span> <span class="o">|</span> <span class="n">bash</span>
<span class="o">./</span><span class="n">nextflow</span> <span class="bp">self</span><span class="o">-</span><span class="n">update</span>
</pre></div>
</div>
</div>
<div class="section" id="azure-blob-storage">
<span id="azure-blobstorage"></span><h2>Azure Blob Storage<a class="headerlink" href="#azure-blob-storage" title="Permalink to this headline">¶</a></h2>
<p>Nextflow has built-in support for <a class="reference external" href="https://azure.microsoft.com/en-us/services/storage/blobs/">Azure Blob Storage</a>.
Files stored in a Azure blob container can be accessed transparently in your pipeline script like any other file
in the local file system.</p>
<p>The Blob storage account <cite>name</cite> and <cite>key</cite> needs to be provided in the Nextflow configuration file as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span> <span class="p">{</span>
  <span class="n">storage</span> <span class="p">{</span>
    <span class="n">accountName</span> <span class="o">=</span> <span class="s2">&quot;&lt;YOUR BLOB ACCOUNT NAME&gt;&quot;</span>
    <span class="n">accountKey</span> <span class="o">=</span> <span class="s2">&quot;&lt;YOUR BLOB ACCOUNT KEY&gt;&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As an alternative to the account key it can also used <cite>Shared Access Token</cite> using the setting <code class="docutils literal notranslate"><span class="pre">sasToken</span></code> in place
of the <code class="docutils literal notranslate"><span class="pre">accountKey</span></code> attribute.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When creating the <cite>Shared Access Token</cite> make sure to allow the resource types <cite>Container</cite> and <cite>Object</cite> and allow
the permissions: <cite>Read</cite>, <cite>Write</cite>, <cite>Delete</cite>, <cite>List</cite>, <cite>Add</cite>, <cite>Create</cite>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The value of <code class="docutils literal notranslate"><span class="pre">sasToken</span></code> is the token stripped by the character <code class="docutils literal notranslate"><span class="pre">?</span></code> from the beginning of the token.</p>
</div>
<p>Once the Blob Storage credentials are set you can access the files in the blob container like local files prepending
the file path with the <code class="docutils literal notranslate"><span class="pre">az://</span></code> prefix followed by the container name. For example, having a container named <code class="docutils literal notranslate"><span class="pre">my-data</span></code>
container a file named <code class="docutils literal notranslate"><span class="pre">foo.txt</span></code> you can access it in your Nextflow script using the following fully qualified
file path <code class="docutils literal notranslate"><span class="pre">az://my-data/foo.txt</span></code>.</p>
</div>
<div class="section" id="azure-batch">
<span id="id2"></span><h2>Azure Batch<a class="headerlink" href="#azure-batch" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/batch/">Azure Batch</a> is a managed computing service that allows the execution
of containerised workloads in the Azure cloud infrastructure.</p>
<p>Nextflow provides a built-in support for Azure Batch which allows the seamless deployment of a Nextflow pipeline in the cloud
offloading the process executions as Batch jobs.</p>
<div class="section" id="get-started">
<h3>Get started<a class="headerlink" href="#get-started" title="Permalink to this headline">¶</a></h3>
<p>1 - Create a Batch account in Azure portal. Take note of the account name and key.</p>
<p>2 - Make sure to adjust your quotas on the pipeline’s needs. There are limits on certain resources associated with the
Batch account. Many of these limits are default quotas applied by Azure at the subscription or account level.
Quotas impact on the number of Pools, CPUs and Jobs you can create at any given time.</p>
<p>3 - Create a Storage account and, within, an Azure Blob Container in the same location where the Batch account was created.
Take note of the account name and key.</p>
<p>4 - Associate the Blob Storage account with the Azure Batch account.</p>
<p>5 - Make sure your pipeline processes specify one or more Docker containers by using the <a class="reference internal" href="process.html#process-container"><span class="std std-ref">container</span></a> directive.</p>
<p>6 - The container images need to be published into Docker registry such as <a class="reference external" href="https://hub.docker.com/">Docker Hub</a>,
<a class="reference external" href="https://quay.io/">Quay</a> or <a class="reference external" href="https://docs.microsoft.com/en-us/azure/container-registry/">Azure Container Registry</a>
that can be reached by Azure Batch environment.</p>
<p>A minimal configuration looks like the following snippet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">process</span> <span class="p">{</span>
  <span class="n">executor</span> <span class="o">=</span> <span class="s1">&#39;azurebatch&#39;</span>
<span class="p">}</span>

<span class="n">azure</span> <span class="p">{</span>
  <span class="n">storage</span> <span class="p">{</span>
    <span class="n">accountName</span> <span class="o">=</span> <span class="s2">&quot;&lt;YOUR STORAGE ACCOUNT NAME&gt;&quot;</span>
    <span class="n">accountKey</span> <span class="o">=</span> <span class="s2">&quot;&lt;YOUR STORAGE ACCOUNT KEY&gt;&quot;</span>
  <span class="p">}</span>
  <span class="n">batch</span> <span class="p">{</span>
    <span class="n">location</span> <span class="o">=</span> <span class="s1">&#39;&lt;YOUR LOCATION&gt;&#39;</span>
    <span class="n">accountName</span> <span class="o">=</span> <span class="s1">&#39;&lt;YOUR BATCH ACCOUNT NAME&gt;&#39;</span>
    <span class="n">accountKey</span> <span class="o">=</span> <span class="s1">&#39;&lt;YOUR BATCH ACCOUNT KEY&gt;&#39;</span>
    <span class="n">autoPoolMode</span> <span class="o">=</span> <span class="n">true</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the above example, replace the location and the account placeholders with the value corresponding to your configuration and
save it to a file named <code class="docutils literal notranslate"><span class="pre">nextflow.config</span></code>.</p>
<p>Given the previous configuration, launch the execution of the pipeline using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nextflow</span> <span class="n">run</span> <span class="o">&lt;</span><span class="n">PIPELINE</span> <span class="n">NAME</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">w</span> <span class="n">az</span><span class="p">:</span><span class="o">//</span><span class="n">YOUR</span><span class="o">-</span><span class="n">CONTAINER</span><span class="o">/</span><span class="n">work</span>
</pre></div>
</div>
<p>Replacing <code class="docutils literal notranslate"><span class="pre">&lt;PIPELINE</span> <span class="pre">NAME&gt;</span></code> with a pipeline name e.g. <code class="docutils literal notranslate"><span class="pre">nextflow-io/rnaseq-nf</span></code> and <code class="docutils literal notranslate"><span class="pre">YOUR-CONTAINER</span></code> a blob
container in the storage account defined in the above configuration.</p>
<p>See the <a class="reference external" href="https://docs.microsoft.com/en-us/azure/batch/quick-create-portal">Batch documentation</a> for further
details about the configuration for the Azure Batch service.</p>
</div>
<div class="section" id="pools-configuration">
<h3>Pools configuration<a class="headerlink" href="#pools-configuration" title="Permalink to this headline">¶</a></h3>
<p>When using the <code class="docutils literal notranslate"><span class="pre">autoPoolMode</span></code> setting Nextflow automatically creates a <cite>pool</cite> of computing nodes to execute the
jobs run by your pipeline. By default it only uses 1 compute node of <code class="docutils literal notranslate"><span class="pre">Standard_D4_v3</span></code> type.</p>
<p>The pool is not removed when the pipeline execution terminates, unless the configuration setting <code class="docutils literal notranslate"><span class="pre">deletePoolsOnCompletion=true</span></code>
is added in your pipeline configuration file.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don’t forget to clean up the Batch pools to avoid in extra charges in the Batch account or use the auto scaling feature.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure your Batch account has enough resources to satisfy the pipeline’s requirements and the pool configuration.</p>
</div>
<p>Pool specific settings, e.g. VM type and count, should be provided in the <code class="docutils literal notranslate"><span class="pre">auto</span></code> pool configuration scope, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span> <span class="p">{</span>
    <span class="n">batch</span> <span class="p">{</span>
        <span class="n">pools</span> <span class="p">{</span>
            <span class="n">auto</span> <span class="p">{</span>
               <span class="n">vmType</span> <span class="o">=</span> <span class="s1">&#39;Standard_D2_v2&#39;</span>
               <span class="n">vmCount</span> <span class="o">=</span> <span class="mi">10</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="named-pools">
<h3>Named pools<a class="headerlink" href="#named-pools" title="Permalink to this headline">¶</a></h3>
<p>If you want to have a more precise control on the computing nodes pools used in your pipeline using a different pool
depending on the task in your pipeline, you can use the Nextflow <a class="reference internal" href="process.html#process-queue"><span class="std std-ref">queue</span></a> directive to specify the <em>ID</em> of a
Azure Batch compute pool that has to be used to run that process’ tasks.</p>
<p>The pool is expected to be already available in the Batch environment, unless the setting <code class="docutils literal notranslate"><span class="pre">allowPoolCreation=true</span></code> is
provided in the <code class="docutils literal notranslate"><span class="pre">batch</span></code> setting in the pipeline configuration file. In the latter case Nextflow will create the pools on-demand.</p>
<p>The configuration details for each pool can be specified using a snippet as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span> <span class="p">{</span>
    <span class="n">batch</span> <span class="p">{</span>
        <span class="n">pools</span> <span class="p">{</span>
            <span class="n">foo</span> <span class="p">{</span>
               <span class="n">vmType</span> <span class="o">=</span> <span class="s1">&#39;Standard_D2_v2&#39;</span>
               <span class="n">vmCount</span> <span class="o">=</span> <span class="mi">10</span>
            <span class="p">}</span>

            <span class="n">bar</span> <span class="p">{</span>
                <span class="n">vmType</span> <span class="o">=</span> <span class="s1">&#39;Standard_E2_v3&#39;</span>
                <span class="n">vmCount</span> <span class="o">=</span> <span class="mi">5</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above example defines the configuration for two node pools. The first will provision 10 compute nodes of type <code class="docutils literal notranslate"><span class="pre">Standard_D2_v2</span></code>,
the second 5 nodes of type <code class="docutils literal notranslate"><span class="pre">Standard_E2_v3</span></code>. See the <a class="reference internal" href="#advanced-settings">Advanced settings</a> below for the complete list of available
configuration options.</p>
</div>
<div class="section" id="requirements-on-pre-existing-named-pools">
<h3>Requirements on pre-existing named pools<a class="headerlink" href="#requirements-on-pre-existing-named-pools" title="Permalink to this headline">¶</a></h3>
<p>When Nextflow is configured to use a pool already available in the Batch account, the target pool must satisfy the following
requirements:</p>
<p>1 - the pool must be declared as <code class="docutils literal notranslate"><span class="pre">dockerCompatible</span></code> (<code class="docutils literal notranslate"><span class="pre">Container</span> <span class="pre">Type</span></code> property)</p>
<p>2 - the task slots per node must match with the number of cores for the selected VM. Nextflow would return an error like
“Azure Batch pool ‘ID’ slots per node does not match the VM num cores (slots: N, cores: Y)”.</p>
</div>
<div class="section" id="pool-autoscaling">
<h3>Pool autoscaling<a class="headerlink" href="#pool-autoscaling" title="Permalink to this headline">¶</a></h3>
<p>Azure Batch can automatically scale pools based on parameters that you define, saving you time and money. With automatic scaling,
Batch dynamically adds nodes to a pool as task demands increase, and removes compute nodes as task demands decrease.</p>
<p>To enable this feature for pools created by Nextflow, add the option <code class="docutils literal notranslate"><span class="pre">autoScale</span> <span class="pre">=</span> <span class="pre">true</span></code> to the corresponding pool configuration scope.
For example, when using the <code class="docutils literal notranslate"><span class="pre">autoPoolMode</span></code>, the setting looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span> <span class="p">{</span>
    <span class="n">batch</span> <span class="p">{</span>
        <span class="n">pools</span> <span class="p">{</span>
            <span class="n">auto</span> <span class="p">{</span>
               <span class="n">autoScale</span> <span class="o">=</span> <span class="n">true</span>
               <span class="n">vmType</span> <span class="o">=</span> <span class="s1">&#39;Standard_D2_v2&#39;</span>
               <span class="n">vmCount</span> <span class="o">=</span> <span class="mi">5</span>
               <span class="n">maxVmCount</span> <span class="o">=</span> <span class="mi">50</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Nextflow uses the formula shown below to determine the number of VMs to be provisioned in the pool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Get pool lifetime since creation.
lifespan = time() - time(&quot;{{poolCreationTime}}&quot;);
interval = TimeInterval_Minute * {{scaleInterval}};

// Compute the target nodes based on pending tasks.
// $PendingTasks == The sum of $ActiveTasks and $RunningTasks
$samples = $PendingTasks.GetSamplePercent(interval);
$tasks = $samples &lt; 70 ? max(0, $PendingTasks.GetSample(1)) : max( $PendingTasks.GetSample(1), avg($PendingTasks.GetSample(interval)));
$targetVMs = $tasks &gt; 0 ? $tasks : max(0, $TargetDedicatedNodes/2);
targetPoolSize = max(0, min($targetVMs, {{maxVmCount}}));

// For first interval deploy 1 node, for other intervals scale up/down as per tasks.
$TargetDedicatedNodes = lifespan &lt; interval ? {{vmCount}} : targetPoolSize;
$NodeDeallocationOption = taskcompletion;
</pre></div>
</div>
<p>The above formula initialises a pool with the number of VMs specified by the <code class="docutils literal notranslate"><span class="pre">vmCount</span></code> option, it scales up the pool on-demand,
based on the number of pending tasks up to <code class="docutils literal notranslate"><span class="pre">maxVmCount</span></code> nodes. If no jobs are submitted for execution, it scales down
to zero nodes automatically.</p>
<p>If you need a different strategy you can provide your own formula using the <code class="docutils literal notranslate"><span class="pre">scaleFormula</span></code> option.
See the <a class="reference external" href="https://docs.microsoft.com/en-us/azure/batch/batch-automatic-scaling">Azure Batch</a> documentation for details.</p>
</div>
</div>
<div class="section" id="advanced-settings">
<h2>Advanced settings<a class="headerlink" href="#advanced-settings" title="Permalink to this headline">¶</a></h2>
<p>The following configuration options are available:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>azure.storage.accountName</p></td>
<td><p>The blob storage account name</p></td>
</tr>
<tr class="row-odd"><td><p>azure.storage.accountKey</p></td>
<td><p>The blob storage account key</p></td>
</tr>
<tr class="row-even"><td><p>azure.storage.sasToken</p></td>
<td><p>The blob storage shared access signature token. This can be provided as an alternative to the <code class="docutils literal notranslate"><span class="pre">accountKey</span></code> setting.</p></td>
</tr>
<tr class="row-odd"><td><p>azure.storage.tokenDuration</p></td>
<td><p>The duration of the shared access signature token created by Nextflow when the <code class="docutils literal notranslate"><span class="pre">sasToken</span></code> option is <em>not</em> specified (default: <code class="docutils literal notranslate"><span class="pre">12h</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>azure.batch.accountName</p></td>
<td><p>The batch service account name.</p></td>
</tr>
<tr class="row-odd"><td><p>azure.batch.accountKey</p></td>
<td><p>The batch service account key.</p></td>
</tr>
<tr class="row-even"><td><p>azure.batch.endpoint</p></td>
<td><p>The batch service endpoint e.g. <code class="docutils literal notranslate"><span class="pre">https://nfbatch1.westeurope.batch.azure.com</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>azure.batch.location</p></td>
<td><p>The batch service location e.g. <code class="docutils literal notranslate"><span class="pre">westeurope</span></code>. This is not needed when the endpoint is specified.</p></td>
</tr>
<tr class="row-even"><td><p>azure.batch.autoPoolMode</p></td>
<td><p>Enable the automatic creation of batch pools depending on the pipeline resources demand (default: <code class="docutils literal notranslate"><span class="pre">true</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>azure.batch.allowPoolCreation</p></td>
<td><p>Enable the automatic creation of batch pools specified in the Nextflow configuration file (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>azure.batch.deleteJobsOnCompletion</p></td>
<td><p>Enable the automatic deletion of jobs created by the pipeline execution (default: <code class="docutils literal notranslate"><span class="pre">true</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>azure.batch.deletePoolsOnCompletion</p></td>
<td><p>Enable the automatic deletion of compute node pools upon pipeline completion (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>azure.batch.copyToolInstallMode</p></td>
<td><p>Specify where the <cite>azcopy</cite> tool used by Nextflow. When <code class="docutils literal notranslate"><span class="pre">node</span></code> is specified it’s copied once during the pool creation. When <code class="docutils literal notranslate"><span class="pre">task</span></code> is provider, it’s installed for each task execution (default: <code class="docutils literal notranslate"><span class="pre">node</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>azure.batch.pools.&lt;name&gt;.vmType</p></td>
<td><p>Specify the virtual machine type used by the pool identified with <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>azure.batch.pools.&lt;name&gt;.vmCount</p></td>
<td><p>Specify the number of virtual machines provisioned by the pool identified with <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>azure.batch.pools.&lt;name&gt;.maxVmCount</p></td>
<td><p>Specify the max of virtual machine when using auto scale option.</p></td>
</tr>
<tr class="row-even"><td><p>azure.batch.pools.&lt;name&gt;.autoScale</p></td>
<td><p>Enable autoscaling feature for the pool identified with <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>azure.batch.pools.&lt;name&gt;.scaleFormula</p></td>
<td><p>Specify the scale formula for the pool identified with <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code>. See Azure Batch <a class="reference external" href="https://docs.microsoft.com/en-us/azure/batch/batch-automatic-scaling">scaling documentation</a> for details.</p></td>
</tr>
<tr class="row-even"><td><p>azure.batch.pools.&lt;name&gt;.scaleInterval</p></td>
<td><p>Specify the interval at which to automatically adjust the Pool size according to the autoscale formula. The minimum and maximum value are 5 minutes and 168 hours respectively (default: <cite>10 mins</cite>)</p></td>
</tr>
<tr class="row-odd"><td><p>azure.batch.pools.&lt;name&gt;.schedulePolicy</p></td>
<td><p>Specify the scheduling policy for the pool identified with <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code>. It can be either <code class="docutils literal notranslate"><span class="pre">spread</span></code> or <code class="docutils literal notranslate"><span class="pre">pack</span></code> (default: <code class="docutils literal notranslate"><span class="pre">spread</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="amazons3.html" class="btn btn-neutral float-left" title="Amazon S3 storage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="google.html" class="btn btn-neutral float-right" title="Google Cloud" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Seqera Labs. 2013-2019, Centre for Genomic Regulation (CRG)..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-364526-10', 'auto');
    ga('send', 'pageview');
    </script> 

</body>
</html>