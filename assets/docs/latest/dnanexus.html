

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DNAnexus cloud &mdash; Nextflow 0.24.4 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Nextflow 0.24.4 documentation" href="index.html"/>
        <link rel="next" title="Docker containers" href="docker.html"/>
        <link rel="prev" title="Amazon S3 storage" href="amazons3.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Nextflow
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getstarted.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html">Pipeline script</a></li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="channel.html">Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="operator.html">Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="executor.html">Executors</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="awscloud.html">Amazon Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="amazons3.html">Amazon S3 storage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">DNAnexus cloud</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#app-packing">App packing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#execution">Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-it-works">How it works</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="singularity.html">Singularity</a></li>
<li class="toctree-l1"><a class="reference internal" href="ignite.html">Apache Ignite</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracing.html">Tracing &amp; visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sharing.html">Pipeline sharing</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Workflow introspection</a></li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Nextflow</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>DNAnexus cloud</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dnanexus-cloud">
<span id="dnanexus-page"></span><h1>DNAnexus cloud<a class="headerlink" href="#dnanexus-cloud" title="Permalink to this headline">¶</a></h1>
<p>DNAnexus is a cloud platform specifically designed for genomics applications. Nextflow provides experimental support
for the DNAnexus platform allowing you to execute your pipeline in the cloud.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This feature has been deprecated and will be removed in a future release.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>You will need a DNAnexus account and the <a class="reference external" href="https://wiki.dnanexus.com/Downloads#DNAnexus-Platform-SDK">DNAnexus SDK toolkit</a>
installed in your computer.</p>
<p>Moreover, since extra runtime packages are required by Nextflow to enable it to run in the cloud, you will need to download
the full Nextflow source tree in your computer. You can do this by using the following <cite>git</cite> command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">nextflow</span><span class="o">-</span><span class="n">io</span><span class="o">/</span><span class="n">nextflow</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</div>
<div class="section" id="app-packing">
<h2>App packing<a class="headerlink" href="#app-packing" title="Permalink to this headline">¶</a></h2>
<p>In order to execute a Nextflow pipeline in the DNAnexus cloud you need to package it as a DNAnexus app (or applet).
Thus you will need to use the <code class="docutils literal"><span class="pre">dx-app-wizard</span></code> command to create the application structure and copy the pipeline script,
along with the Nextflow runtime, in the app project folder..</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Read more about DNAnexus applications at <a class="reference external" href="https://wiki.dnanexus.com/Developer-Tutorials/Intro-to-Building-Apps">this link</a>.</p>
</div>
<p>Nextflow provides a shortcut that helps you create the DNAnexus application skeleton pre-configured to work with it.</p>
<p>Simply change to the Nextflow source project folder, that you have cloned with <cite>git</cite>, and type the command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">gradlew</span> <span class="n">dnanexus</span>
</pre></div>
</div>
<p>This will:</p>
<ol class="arabic simple">
<li>Build the Nextflow runtime with the required dependencies</li>
<li>Create the DNAnexus app skeleton in the folder named <code class="docutils literal"><span class="pre">dx-project</span></code></li>
<li>Create the <code class="docutils literal"><span class="pre">dxapp.json</span></code> application manifest</li>
<li>Create the <code class="docutils literal"><span class="pre">dxapp.sh</span></code> pipeline launcher</li>
<li>Copy the Nextflow runtime to the <code class="docutils literal"><span class="pre">dx-project/resources/usr/bin</span></code> folder</li>
<li>Copy some example scripts to the <code class="docutils literal"><span class="pre">dx-project/resources</span></code> folder</li>
</ol>
<p>Then, you will need to add your pipeline script into the <code class="docutils literal"><span class="pre">resources</span></code> folder (adding any other eventually needed
binary dependencies) and modify the <code class="docutils literal"><span class="pre">dxapp.json</span></code> file providing your application name.</p>
<p>When you have finished, package and upload the app by using the DNAnexus <cite>build</cite> command, as shown below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dx</span> <span class="n">build</span> <span class="o">-</span><span class="n">f</span>
</pre></div>
</div>
</div>
<div class="section" id="execution">
<h2>Execution<a class="headerlink" href="#execution" title="Permalink to this headline">¶</a></h2>
<p>When ready, you can launch it like any other DNAnexus app, by using the <cite>run</cite> command, for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dx</span> <span class="n">run</span> <span class="n">nextflow</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Replace <code class="docutils literal"><span class="pre">nextflow</span></code> with your app name in the above example.</p>
</div>
<p>By running this example and confirming the default options, a simple <cite>Hello world</cite> script will run in the cloud, producing
the output shown below.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>Job Log
-------
Watching job job-BFY5Pz00kF9B7FY891602V7g. Press Ctrl+C to stop.
* Nextflow pipelines framework (nextflow:main) (running) job-BFY5Pz00kF9B7FY891602V7g
  pditommaso 2014-01-27 13:58:36 (running for 0:00:05)
2014-01-27 14:02:18 Nextflow pipelines framework INFO Logging initialized (priority)
2014-01-27 14:02:22 Nextflow pipelines framework STDOUT Installing apt packages openjdk-7-jre-headless, dx-toolkit
2014-01-27 14:02:47 Nextflow pipelines framework STDOUT &gt;&gt;&gt; Unpacking resources.tar.gz to /
2014-01-27 14:02:47 Nextflow pipelines framework STDOUT *** Downloading bundled file resources.tar.gz
2014-01-27 14:02:48 Nextflow pipelines framework STDOUT bash running (job ID job-BFY5Pz00kF9B7FY891602V7g)
2014-01-27 14:02:51 Nextflow pipelines framework STDOUT N E X T F L O W  ~  version 0.6.0
2014-01-27 14:02:54 Nextflow pipelines framework STDOUT [63/9a33ce] Running process &gt; sayhello (1)
2014-01-27 14:04:09 Nextflow pipelines framework STDOUT Hello world!
2014-01-27 14:04:23 Nextflow pipelines framework STDOUT nextflow exitstatus &gt; 0
2014-01-27 14:04:24 Nextflow pipelines framework STDOUT hello.log &gt; file-BFY5Xf00kF97JFXyzJ3Xg637
* Nextflow pipelines framework (nextflow:main) (done) job-BFY5Pz00kF9B7FY891602V7g
  pditommaso 2014-01-27 13:58:36 (runtime 0:02:11)
  Output: -
</pre></div>
</div>
</div>
<div class="section" id="how-it-works">
<h2>How it works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>The DNAnexus app is executed by the BASH script called <code class="docutils literal"><span class="pre">dxapp.sh</span></code> which defines two functions: <cite>main</cite> and <cite>process</cite>.</p>
<p>The <cite>main</cite> function is the one that launches the Nextflow pipeline script execution in the cloud, specifying the required
configuration parameters.</p>
<p>Nextflow will be able to manage the processes scheduling and execution in the cloud because it is launched by specifying
the <code class="docutils literal"><span class="pre">dnanexus</span></code> executor.</p>
<p>When a new process needs to be executed, Nextflow will use the DNAnexus API to run a new job, which in turn calls
the function <cite>process</cite>, defined in the <code class="docutils literal"><span class="pre">dxapp.sh</span></code> script, specifying the target command to run.</p>
<p>Read more about Nextflow's <cite>dnanexus</cite> executor configuration properties <a class="reference internal" href="executor.html#dnanexus-executor"><span class="std std-ref">here</span></a>.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="docker.html" class="btn btn-neutral float-right" title="Docker containers" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="amazons3.html" class="btn btn-neutral" title="Amazon S3 storage" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2016, Nextflow authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'https://www.nextflow.io/docs/latest/index.html',
            VERSION:'0.24.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>