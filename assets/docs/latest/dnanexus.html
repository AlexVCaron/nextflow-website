

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DNAnexus cloud &mdash; Nextflow 0.14.4 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.14.4',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
    <script type="text/javascript">
        jQuery(function () {
            SphinxRtdTheme.StickyNav.enable();
        });
    </script>
  

  
    <link rel="top" title="Nextflow 0.14.4 documentation" href="index.html"/>
        <link rel="next" title="GridGain cluster" href="gridgain.html"/>
        <link rel="prev" title="Docker containers" href="docker.html"/> 

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Nextflow</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getstarted.html">Get started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getstarted.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="getstarted.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getstarted.html#your-first-script">Your first script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="basic.html#processes-and-channels">Processes and channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic.html#execution-abstraction">Execution abstraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic.html#scripting-language">Scripting language</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic.html#configuration-options">Configuration options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="script.html">Pipeline script</a><ul>
<li class="toctree-l2"><a class="reference internal" href="script.html#language-basics">Language basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="script.html#closures">Closures</a></li>
<li class="toctree-l2"><a class="reference internal" href="script.html#regular-expressions">Regular expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="script.html#files-and-i-o">Files and I/O</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Processes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="process.html#script">Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="process.html#inputs">Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="process.html#outputs">Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="process.html#when">When</a></li>
<li class="toctree-l2"><a class="reference internal" href="process.html#shares">Shares</a></li>
<li class="toctree-l2"><a class="reference internal" href="process.html#directives">Directives</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="channel.html">Channels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="channel.html#channel-factory">Channel factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel.html#binding-values">Binding values</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel.html#observing-events">Observing events</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="operator.html">Operators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="operator.html#filtering-operators">Filtering operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="operator.html#transforming-operators">Transforming operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="operator.html#splitting-operators">Splitting operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="operator.html#combining-operators">Combining operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="operator.html#forking-operators">Forking operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="operator.html#maths-operators">Maths operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="operator.html#other-operators">Other operators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="executor.html">Executors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="executor.html#local-executor">Local executor</a></li>
<li class="toctree-l2"><a class="reference internal" href="executor.html#sge-executor">SGE executor</a></li>
<li class="toctree-l2"><a class="reference internal" href="executor.html#lsf-executor">LSF executor</a></li>
<li class="toctree-l2"><a class="reference internal" href="executor.html#slurm-executor">SLURM executor</a></li>
<li class="toctree-l2"><a class="reference internal" href="executor.html#pbs-torque-executor">PBS/Torque executor</a></li>
<li class="toctree-l2"><a class="reference internal" href="executor.html#drmaa-executor">DRMAA executor</a></li>
<li class="toctree-l2"><a class="reference internal" href="executor.html#clusterk-cirrus">ClusterK Cirrus</a></li>
<li class="toctree-l2"><a class="reference internal" href="executor.html#dnanexus">DNAnexus</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="config.html#configuration-file">Configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#config-scopes">Config scopes</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#config-profiles">Config profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#environment-variables">Environment variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="amazons3.html">Amazon S3 storage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="amazons3.html#s3-path">S3 path</a></li>
<li class="toctree-l2"><a class="reference internal" href="amazons3.html#security-credentials">Security credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="amazons3.html#advanced-configuration">Advanced configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker containers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="docker.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html#multiple-containers">Multiple containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html#executable-containers">Executable containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html#advanced-settings">Advanced settings</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">DNAnexus cloud</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#app-packing">App packing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#execution">Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-it-works">How it works</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gridgain.html">GridGain cluster</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gridgain.html#cluster-daemon">Cluster daemon</a></li>
<li class="toctree-l2"><a class="reference internal" href="gridgain.html#pipeline-execution">Pipeline execution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tracing.html">Performance Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tracing.html#execution-report">Execution report</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracing.html#extrae-integration">Extrae integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sharing.html">Pipeline sharing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sharing.html#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="sharing.html#run-a-pipeline">Run a pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="sharing.html#handle-revisions">Handle revisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="sharing.html#commands-to-manage-pipelines">Commands to manage pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="sharing.html#publish-your-pipeline">Publish your pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="sharing.html#manage-dependencies">Manage dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="example.html#basic-pipeline">Basic pipeline</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Nextflow</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>DNAnexus cloud</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="dnanexus-cloud">
<span id="dnanexus-page"></span><h1>DNAnexus cloud<a class="headerlink" href="#dnanexus-cloud" title="Permalink to this headline">¶</a></h1>
<p>DNAnexus is a cloud platform specifically designed for genomics applications. Nextflow provides experimental support
for the DNAnexus platform allowing you to execute your pipeline in the cloud.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>You will need a DNAnexus account and the <a class="reference external" href="https://wiki.dnanexus.com/Downloads#DNAnexus-Platform-SDK">DNAnexus SDK toolkit</a>
installed in your computer.</p>
<p>Moreover, since extra runtime packages are required by Nextflow to enable it to run in the cloud, you will need to download
the full Nextflow source tree in your computer. You can do this by using the following <cite>git</cite> command:</p>
<div class="highlight-python"><pre>git clone https://github.com/paoloditommaso/nextflow.git</pre>
</div>
</div>
<div class="section" id="app-packing">
<h2>App packing<a class="headerlink" href="#app-packing" title="Permalink to this headline">¶</a></h2>
<p>In order to execute a Nextflow pipeline in the DNAnexus cloud you need to package it as a DNAnexus app (or applet).
Thus you will need to use the <tt class="docutils literal"><span class="pre">dx-app-wizard</span></tt> command to create the application structure and copy the pipeline script,
along with the Nextflow runtime, in the app project folder..</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Read more about DNAnexus applications at <a class="reference external" href="https://wiki.dnanexus.com/Developer-Tutorials/Intro-to-Building-Apps">this link</a>.</p>
</div>
<p>Nextflow provides a shortcut that helps you create the DNAnexus application skeleton pre-configured to work with it.</p>
<p>Simply change to the Nextflow source project folder, that you have cloned with <cite>git</cite>, and type the command:</p>
<div class="highlight-python"><pre>./gradlew dnanexus</pre>
</div>
<p>This will:</p>
<ol class="arabic simple">
<li>Build the Nextflow runtime with the required dependencies</li>
<li>Create the DNAnexus app skeleton in the folder named <tt class="docutils literal"><span class="pre">dx-project</span></tt></li>
<li>Create the <tt class="docutils literal"><span class="pre">dxapp.json</span></tt> application manifest</li>
<li>Create the <tt class="docutils literal"><span class="pre">dxapp.sh</span></tt> pipeline launcher</li>
<li>Copy the Nextflow runtime to the <tt class="docutils literal"><span class="pre">dx-project/resources/usr/bin</span></tt> folder</li>
<li>Copy some example scripts to the <tt class="docutils literal"><span class="pre">dx-project/resources</span></tt> folder</li>
</ol>
<p>Then, you will need to add your pipeline script into the <tt class="docutils literal"><span class="pre">resources</span></tt> folder (adding any other eventually needed
binary dependencies) and modify the <tt class="docutils literal"><span class="pre">dxapp.json</span></tt> file providing your application name.</p>
<p>When you have finished, package and upload the app by using the DNAnexus <cite>build</cite> command, as shown below:</p>
<div class="highlight-python"><pre>dx build -f</pre>
</div>
</div>
<div class="section" id="execution">
<h2>Execution<a class="headerlink" href="#execution" title="Permalink to this headline">¶</a></h2>
<p>When ready, you can launch it like any other DNAnexus app, by using the <cite>run</cite> command, for example:</p>
<div class="highlight-python"><pre>dx run nextflow</pre>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Replace <tt class="docutils literal"><span class="pre">nextflow</span></tt> with your app name in the above example.</p>
</div>
<p>By running this example and confirming the default options, a simple <cite>Hello world</cite> script will run in the cloud, producing
the output shown below.</p>
<div class="highlight-python"><pre>Job Log
-------
Watching job job-BFY5Pz00kF9B7FY891602V7g. Press Ctrl+C to stop.
* Nextflow pipelines framework (nextflow:main) (running) job-BFY5Pz00kF9B7FY891602V7g
  pditommaso 2014-01-27 13:58:36 (running for 0:00:05)
2014-01-27 14:02:18 Nextflow pipelines framework INFO Logging initialized (priority)
2014-01-27 14:02:22 Nextflow pipelines framework STDOUT Installing apt packages openjdk-7-jre-headless, dx-toolkit
2014-01-27 14:02:47 Nextflow pipelines framework STDOUT &gt;&gt;&gt; Unpacking resources.tar.gz to /
2014-01-27 14:02:47 Nextflow pipelines framework STDOUT *** Downloading bundled file resources.tar.gz
2014-01-27 14:02:48 Nextflow pipelines framework STDOUT bash running (job ID job-BFY5Pz00kF9B7FY891602V7g)
2014-01-27 14:02:51 Nextflow pipelines framework STDOUT N E X T F L O W  ~  version 0.6.0
2014-01-27 14:02:54 Nextflow pipelines framework STDOUT [63/9a33ce] Running process &gt; sayhello (1)
2014-01-27 14:04:09 Nextflow pipelines framework STDOUT Hello world!
2014-01-27 14:04:23 Nextflow pipelines framework STDOUT nextflow exitstatus &gt; 0
2014-01-27 14:04:24 Nextflow pipelines framework STDOUT hello.log &gt; file-BFY5Xf00kF97JFXyzJ3Xg637
* Nextflow pipelines framework (nextflow:main) (done) job-BFY5Pz00kF9B7FY891602V7g
  pditommaso 2014-01-27 13:58:36 (runtime 0:02:11)
  Output: -</pre>
</div>
</div>
<div class="section" id="how-it-works">
<h2>How it works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>The DNAnexus app is executed by the BASH script called <tt class="docutils literal"><span class="pre">dxapp.sh</span></tt> which defines two functions: <cite>main</cite> and <cite>process</cite>.</p>
<p>The <cite>main</cite> function is the one that launches the Nextflow pipeline script execution in the cloud, specifying the required
configuration parameters.</p>
<p>Nextflow will be able to manage the processes scheduling and execution in the cloud because it is launched by specifying
the <tt class="docutils literal"><span class="pre">dnanexus</span></tt> executor.</p>
<p>When a new process needs to be executed, Nextflow will use the DNAnexus API to run a new job, which in turn calls
the function <cite>process</cite>, defined in the <tt class="docutils literal"><span class="pre">dxapp.sh</span></tt> script, specifying the target command to run.</p>
<p>Read more about Nextflow's <cite>dnanexus</cite> executor configuration properties <a class="reference internal" href="executor.html#dnanexus-executor"><em>here</em></a>.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gridgain.html" class="btn btn-neutral float-right" title="GridGain cluster"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="docker.html" class="btn btn-neutral" title="Docker containers"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, Nextflow authors.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

  
  <script>
  if( window.location.hostname == 'localhost' || window.location.hostname == '127.0.0.1' ) { throw new Error('Skip GA on localhost') };
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-364526-10', 'auto');
  ga('send', 'pageview');
  </script>
</body>
</html>